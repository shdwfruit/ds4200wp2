<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Visualizations - Information Visualization Presentation</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .accordion {
            width: 100%;
            margin: 2rem 0;
        }

        .accordion-section {
            background: white;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .accordion-header {
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .accordion-header:hover {
            background-color: #f8f9fa;
        }

        .accordion-header h2 {
            margin: 0;
            font-size: 1.2rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .accordion-content.active {
            max-height: 2000px;
        }

        .visualization-container {
            padding: 1.5rem;
            background-color: white;
        }

        .description {
            color: #666;
            margin-bottom: 1rem;
        }

        .visualization-type {
            font-size: 1.2rem;
        }

        .interactive-visualization {
            width: 100%;
            height: 775px;
            margin: 1rem 0;
        }

        .tooltip {
            position: absolute;
            padding: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 4px;
            pointer-events: none;
        }

        .axis-label {
            font-size: 12px;
            font-weight: bold;
        }

        .tick line {
            stroke: #ccc;
        }

        .tick text {
            font-size: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1> Mulitvariate Analysis of Diamond Pricing Factors </h1>
    </header>

    <div class="container">
        <div class="accordion">

            <!-- Price vs. Carat vs. Cut Visualization -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">📊</span> Price vs. Carat Analysis </h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 1200px;">
                        <div id="scatter_price_carat_cut" class="interactive-visualization">
                            <p>
                                <Strong>General Pattern: All Cuts Combined</Strong>
                                <br/>
                                In the first scatter plot that includes all cuts, we observe a clear positive correlation between carat and price: 
                                as the carat of a diamond increases, its price tends to rise. However, this relationship is nonlinear—prices 
                                grow faster at higher carats, suggesting that price increases exponentially with carat size. 
                                There's a dense concentration of diamonds under 2 carats and $6,000, indicating these are the most common 
                                and accessible options. Above 2 carats, diamonds become much rarer and significantly more expensive. 
                                Additionally, we see overlapping dots from different cuts, indicating that cut alone doesn't solely determine 
                                price—other factors like color and clarity may play a role.
                                <br/>
                                <br/>
                                <Strong>Individual Cut Trends</Strong>
                                <br/>
                                <ul>
                                    <li>
                                        <Strong>Fair Cut</Strong>: Diamonds with a Fair cut tend to have greater variation in price 
                                        for the same carat weight. Some Fair cut diamonds with high carat values exceed $15,000, while others 
                                        of similar weight are significantly less expensive. This suggests inconsistency, potentially due to lower 
                                        perceived quality or trade-offs in other attributes like clarity or color.
                                    </li>
                                    <li>
                                        <Strong>Good Cut</Strong>: Good cut diamonds display a moderate upward trend. Most diamonds in this category 
                                        fall below 2 carats and $10,000. There is more price consistency than Fair cut diamonds, 
                                        suggesting slightly better overall quality, but still notable variability.
                                    </li>
                                    <li>
                                        <Strong>Very Good Cut</Strong>: Diamonds with a Very Good cut show a tighter and more consistent 
                                        relationship between carat and price. Prices rise steadily with carat weight, 
                                        and the spread is narrower compared to Fair and Good cuts. Most diamonds are under 2.5 carats and $12,000, 
                                        indicating popularity among buyers seeking balance between quality and price.
                                    </li>
                                    <li>
                                        <Strong>Ideal Cut</Strong>: Ideal cut diamonds are concentrated in the lower carat range (below 2 carats) 
                                        with prices mostly under $10,000. This could reflect market preference for Ideal cuts in smaller, 
                                        well-proportioned stones. The price-to-carat trend is consistent, though not as steep as Premium cuts. 
                                        These diamonds tend to offer high quality at more modest sizes.
                                    </li>
                                    <li>
                                        <Strong>Premium Cut</Strong>: Premium cut diamonds demonstrate one of the clearest and strongest upward trends. 
                                        There are many high-carat diamonds in this group, with prices stretching well past $15,000. 
                                        This indicates that Premium cuts are often chosen for larger, more luxurious diamonds and that the 
                                        market places higher value on this combination.
                                    </li>
                                </ul>
                                <br/>
                                <Strong>Summary of Price, Carat, and Cut Relationship</Strong>:
                                <br/>
                                Across all individual charts, the strongest factor influencing price is carat, with price rising as carat increases, 
                                especially beyond the 2-carat mark. However, cut also plays a role: Premium and Very Good cuts tend to have higher price ranges 
                                at similar carats, while Ideal cuts are more concentrated in smaller diamonds. Fair cuts show the most price variability, 
                                possibly reflecting inconsistencies in quality or market value. These scatter plots confirm the finding from the 
                                correlation matrix that carat is the most powerful predictor of diamond price, but also suggest that cut quality interacts 
                                with carat to shape the final price.
                                <br/>
                                <br/>
                            </p>
                            <iframe 
                                src="scatter_price_carat_cut.html" 
                                width="775px"
                                style="height: 500px; border: none; display: block; margin: 0 auto;" 
                                scrolling="no">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Base Reversal Visualization -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">📊</span> Price vs. Clarity vs. Cut Analysis</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 1675px;">
                        <div id="base-reversal" class="interactive-visualization">
                            <p>
                                The scatter plots show a clear and strong positive relationship between carat and price. 
                                As the carat weight of a diamond increases, the price rises significantly, but the relationship is not linear. 
                                Instead, price tends to increase exponentially with size, especially once the diamond exceeds 2 carats. 
                                This pattern demonstrates that carat is the most influential factor in determining a diamond's value, 
                                more so than other attributes like cut or clarity.
                                <br/>
                                <br/>
                                The carat distribution histogram reveals that most diamonds fall between 0.2 and 1.0 carats, 
                                with noticeable spikes at specific weights like 0.3, 0.5, and 1.0 carats. These spikes suggest that certain 
                                standardized weights are more commonly produced or preferred in the market. As carat size increases beyond 1.0, 
                                the frequency of diamonds drops steeply, indicating that larger diamonds are rarer.
                                <br/>
                                <br/>
                                Across all carat ranges, the cut quality distribution consistently shows that Ideal and Premium cuts are the most common. 
                                This trend reflects a market preference for well-proportioned, brilliant diamonds, especially in 
                                the most popular size ranges. Even as the carat weight increases, these cuts continue to dominate, 
                                suggesting buyers prioritize optical quality regardless of size.
                                <br/>
                                <br/>
                                The clarity distribution indicates that most diamonds fall into mid-range clarity grades such as SI1, SI2, and VS2. 
                                This trend remains consistent even as carat weight increases, suggesting that buyers are generally willing to compromise 
                                on internal clarity in favor of size or cut. High clarity grades like IF (Internally Flawless) or VVS1 
                                are much less common and often appear more in smaller or mid-sized diamonds.
                                <br/>
                                <br/>
                                For diamonds under 1 carat, prices are generally under $5,000, but prices climb steeply as the carat approaches 1.0. 
                                This is particularly evident around the 0.9–1.0 carat range, where small differences in weight lead to 
                                noticeably higher prices, showing that 1.0 carat is a psychological or market-driven threshold.
                                <br/>
                                <br/>
                                For diamonds between 1.0 and 1.5 carats, the relationship between carat and price remains positive, 
                                but with a wider spread in pricing. Many diamonds in this range are priced between $4,000 and $10,000, 
                                but variation increases, indicating that other features like cut, color, and clarity may begin to 
                                play a more significant role in price differentiation.
                                <br/>
                                <br/>
                                Between 1.5 and 2.0 carats, the price continues to rise, and a pattern emerges where many diamonds are just below 
                                2.0 carats—such as 1.98 or 1.99. This indicates a pricing strategy where sellers can offer a large-looking diamond 
                                while avoiding the higher price jump that comes with crossing the 2-carat mark. It suggests that even small differences 
                                in carat weight can have a large psychological and financial impact.
                                <br/>
                                <br/>
                                For diamonds over 2.0 carats, prices often begin around $8,000 and extend beyond $20,000. These diamonds are 
                                significantly less common and tend to have the greatest price variation. Despite the high prices, 
                                many of these diamonds still have clarity grades like SI1 and SI2, reinforcing the idea that carat size dominates price, 
                                while clarity is often a secondary concern even at the luxury end of the market.
                                <br/>
                                <br/>
                                <Strong>In conclusion</Strong>, these charts collectively highlight that carat is the strongest driver of price, 
                                with consumers consistently choosing mid-level clarity and favoring Ideal and Premium cuts. 
                                Cut and clarity influence price to some degree, but the visual size and rarity of large diamonds remain the 
                                most powerful factors affecting a diamond's market value.
                                <br/>
                                <br/>
                            </p>
                            <iframe 
                                src="base_reversal.html" 
                                style="width: 875px; height: 800px; display: block; border: none; margin: 0 auto;" 
                                scrolling="no">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JavaScript Visualizations -->

            <!-- Clarity vs. Cut Price Average -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">📊</span> Clarity vs. Cut Price Average</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 675px;">
                        <p>
                            This bar chart illustrates the relationship between average diamond price, cut quality, and clarity grade. 
                            The x-axis displays different cut categories—Fair, Good, Very Good, Premium, and Ideal
                            —while the y-axis shows the average price in US dollars. Each bar within a cut group represents a different clarity grade, 
                            ranging from I1 (lowest clarity) to IF (Internally Flawless, highest clarity). 
                            Interestingly, the chart reveals a somewhat counterintuitive pattern: diamonds with lower clarity grades, such as SI2, 
                            tend to have higher average prices across most cut categories. For example, SI2 diamonds show the highest average prices 
                            in the Premium and Very Good categories. On the other hand, diamonds with higher clarity grades like VVS1 and VVS2 
                            often have lower average prices. This suggests that clarity alone does not determine diamond price and that other 
                            factors—most likely carat weight—may have a stronger influence. Larger diamonds with lower clarity may command higher
                            prices simply due to their size, despite not being as visually flawless. Additionally, while Premium and Very Good cuts 
                            generally have higher average prices than Fair and Good cuts, Ideal cuts do not show the highest prices, likely because 
                            they are more commonly available in smaller sizes. Overall, this chart emphasizes that the relationship between clarity 
                            and price is complex and influenced by interactions with other variables, particularly carat, making it important to 
                            analyze multiple features together when evaluating diamond value.
                        </p>
                        <svg id="clarityplot" style="width: 700px; height: 450px; display: block; margin: 0 auto;"></svg>
                        <div id="claritytooltip" style="
                        position: absolute;
                        background-color: white;
                        border: 1px solid #ccc;
                        padding: 8px;
                        font-size: 12px;
                        border-radius: 4px;
                        pointer-events: none;
                        opacity: 0;
                        z-index: 10;
                        "></div>
                    </div>
                </div>
            </div>

            <!-- Color vs. Cut Price Average -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">📊</span> Color vs. Cut Price Average</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 675px;">
                        <p>
                            This bar chart illustrates the relationship between average diamond price, cut quality, and color grade. 
                            The x-axis categorizes diamonds by cut (Fair, Good, Very Good, Premium, and Ideal), 
                            while the y-axis shows the average price in US dollars. Each bar within a cut category represents a different color grade, 
                            ranging from J (lowest) to D (highest). Interestingly, the chart reveals that diamonds with lower color grades, 
                            such as J and I, tend to have higher average prices across all cut categories. 
                            This may seem counterintuitive since color grades closer to D are considered higher quality. 
                            However, it suggests that diamonds with lower color grades might have higher carat weights, 
                            which significantly impact price more than color alone. Additionally, the Premium cut diamonds generally show the 
                            highest average prices, particularly for lower color grades, while Ideal cut diamonds, which are known for their 
                            excellent proportions, surprisingly have lower average prices. This may be due to the fact that Ideal cuts are more 
                            common in smaller carat diamonds, which are less expensive overall. Fair and Good cuts also display relatively high 
                            average prices for lower color grades, again likely due to the influence of size. Overall, the chart reinforces that 
                            diamond price is influenced by the interaction of multiple features—cut, color, and most importantly, carat—rather 
                            than any single attribute on its own.
                        </p>
                    </br>
                        <svg id="colorplot" style="width: 700px; height: 750px; display: block; margin: 0 auto;"></svg>
                        <div id="colortooltip" style="
                        position: absolute;
                        background-color: white;
                        border: 1px solid #ccc;
                        padding: 8px;
                        font-size: 12px;
                        border-radius: 4px;
                        pointer-events: none;
                        opacity: 0;
                        z-index: 10;
                        "></div>
                    </div>
                </div>
            </div>

            <!-- XYZ Visualization -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">📊</span> XYZ Dimensions Analysis </h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 1475px;">
                        <div id="xyz-analysis" class="interactive-visualization">
                            <p>
                                <Strong>Relationship Between Price and Dimensions</Strong>
                                <br/>
                                The scatter plot in the top-left corner of the first image shows a strong positive relationship between carat and price, 
                                consistent with earlier findings. However, since carat is derived from the diamond's volume, 
                                it's closely tied to the dimensions x, y, and z. This implies that as x, y, and z increase, carat 
                                and therefore price also tend to increase. We see that diamonds with larger dimensions often fall into 
                                higher price ranges, but the relationship becomes more dispersed at higher prices, suggesting that other factors 
                                (like cut and clarity) also contribute to the final value.
                                <br/>
                                <br/>
                                <ul>
                                    <li>
                                        <Strong>x-Dimension (Length) Patterns</Strong>: Across all price ranges, 
                                        the x dimension is typically between 4 mm and 8 mm, peaking around 5-6.5 mm. 
                                        Lower-priced diamonds (under 4,000) tend to have smaller x-values, often below 6 mm, 
                                        while higher-priced diamonds frequently exceed 6 mm in length. As price increases, 
                                        the frequency of x-values also shifts to the right, with higher-priced diamonds having larger lengths. 
                                        In the highest price range (above $16,000), x-dimensions are frequently above 8 mm, 
                                        indicating that longer diamonds contribute to premium pricing.
                                    </li>
                                    <li>
                                        <Strong>y-Dimension (Width) Patterns</Strong>: The y dimension follows a similar distribution to x. 
                                        For most diamonds, y ranges from 4 mm to 8 mm, with a concentration between 5.5 and 7.5 mm. 
                                        In lower price ranges, y dimensions are more concentrated at the lower end (around 5-6 mm), 
                                        while in higher price brackets, y spreads out towards 8 mm and beyond. In the highest price segment, 
                                        y-dimension values approach or exceed 9 mm, reinforcing the pattern that physically larger diamonds 
                                        fetch higher prices.
                                    </li>
                                    <li>
                                        <Strong>z-Dimension (Depth) Patterns</Strong>: The z dimension also reflects a consistent trend: 
                                        as price increases, so does z. For most diamonds, z ranges from 2 mm to 5.5 mm, with peaks around 3.5-4.5 mm. 
                                        High-priced diamonds typically have a z-dimension closer to 5 mm or above, suggesting greater depth. 
                                        However, z shows a slightly narrower spread than x and y, likely due to tighter tolerances in 
                                        cut quality and proportions required for optimal brilliance.
                                    </li>
                                </ul>
                                <br/>
                                <Strong>Conclusion</Strong>: 
                                <br/>
                                The physical dimensions x, y, and z are highly correlated with carat and therefore with price. 
                                As these dimensions increase, so does the price of the diamond. Among them, the x and y dimensions 
                                (length and width) show the most noticeable spread across price categories, 
                                making them good indicators of size and price potential. While z (depth) also increases with price, 
                                its tighter distribution reflects stricter design constraints. Overall, the relationship between diamond price and size 
                                is both strong and nonlinear, and x, y, z offer useful predictive insights when assessing diamond value.
                                <br/>
                                <br/>
                            </p>
                            <iframe 
                                src="x_y_z.html" 
                                style="width: 1400px; height: 800px; border: none; display: block; margin: 0 auto;" 
                                scrolling="no">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Side-by-side Box Plots -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">🖼️</span> Side-by-Side Box Plots</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 900px; width:auto;">
                        <p>
                            In addition to the Decision Tree analysis, We also examined the price distribution of diamonds by categorical features 
                            like cut, color, and clarity.
                            <br/>
                            <br/>
                            From the box plots we found the following:
                            <br/>
                            <br/>
                        </p>
                        <ul>
                            <li>
                                <Strong>Price by Cut</Strong>: The price distributions are relatively similar across different cut qualities 
                                (Ideal, Premium, Good, Very Good, Fair), though Ideal and Premium cuts tend to have slightly higher median prices. 
                                However, the overall price spread does not vary significantly with cut, 
                                suggesting that cut has some influence but is not the strongest factor.
                            </li>
                            <li>
                                <Strong>Price by Color</Strong>: The median price tends to decrease slightly from color grade E and I down to D and G, 
                                but overall the differences are not very large. This indicates that color has only a moderate impact on price.
                            </li>
                            <li>
                                <Strong>Price by Clarity</Strong>: Clarity appears to have a more noticeable effect. Diamonds with lower clarity grades (SI2, SI1, VS1) 
                                show higher medians and wider price ranges. Interestingly, the very highest clarity grades (IF, VVS1) 
                                do not necessarily correspond to the highest median prices, possibly because these diamonds may often be smaller 
                                or more standardized.
                            </li>
                        </ul>
                        <iframe 
                            src="Price Distribution.html" 
                            style="width: 1225px; height: 700px; border:none; display: block; margin: auto 0;" 
                            scrolling="no">
                        </iframe>
                    </div>
                </div>
            </div>

            <!-- Decision Tree -->
            <div class="accordion-section">
                <div class="accordion-header">
                    <h2><span class="visualization-type">🖼️</span> Decision Tree</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="accordion-content">
                    <div class="visualization-container" style="height: 800px;">
                        <p>
                            We used a Decision Tree Classifier and feature importance analysis to study which factors influence diamond prices. 
                            The model achieved an accuracy of 66.96%, indicating that the classifier is reasonably effective and can be used for 
                            further research.
                            <br/>
                            <br/>
                            The feature importance results show that carat size is by far the most significant factor affecting diamond price. 
                            Other features, such as table and depth, have much smaller impacts. This suggests that when predicting or 
                            analyzing diamond prices, carat size should be given the most attention.
                            <br/>
                            <br/>
                            Overall, the decision tree visualization and confusion matrix support these findings and provide a solid foundation 
                            for deeper exploration in future studies.
                            <br/>
                            <br/>
                            </p>
                        <embed src="3in1.png" width=auto height="500px" style="display: block; margin: 0 auto;">
                    </div>
                </div>
            </div>

        </div>

        <div class="visualization-buttons">
            <a href="index.html" class="button">Introduction</a>
            <a href="part2.html" class="button">Exploratory Data Analysis</a>
            <a href="part3.html" class="button">Mulitvariate Analysis</a>
            <a href="part4.html" class="button">Conclusion</a>
        </div>
    </div>

    <footer>
        <p> Authors: Xing Yan, Yazhu Tan, Rick Xie </p>
    </footer>

    <script>
        // Accordion functionality
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const icon = header.querySelector('.toggle-icon');
                
                // Toggle active class
                content.classList.toggle('active');
                
                // Rotate icon
                icon.style.transform = content.classList.contains('active') 
                    ? 'rotate(180deg)' 
                    : 'rotate(0deg)';
            });
        });
    </script>

    <script src="project.js"></script>
    <script src="base_reversal_html"></script>
    <script src="x_y_z.html"></script>
</body>
</html> 